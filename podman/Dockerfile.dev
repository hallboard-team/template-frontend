FROM node:22-bookworm
ARG ANGULAR_VERSION=20

# Install pnpm + Angular CLI inside container as root
RUN corepack enable && corepack prepare pnpm@latest --activate \
 && npm install -g @angular/cli@${ANGULAR_VERSION}

# Create non-root dev user
RUN id -u vscode &>/dev/null || useradd -u 1000 -m vscode
USER 1000:1000
WORKDIR /workspaces/app

CMD ["sleep", "infinity"]
