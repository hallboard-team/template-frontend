version: "3.9"

services:
  dashboard:
    image: ghcr.io/hallboard-team/node-v${NODE_VERSION:-22}_angular-v${ANGULAR_VERSION:-20}:latest
    container_name: ${CONTAINER_NAME_DASHBOARD:-fe-dashboard}_N-v${NODE_VERSION:-22}_A-v${ANGULAR_VERSION:-20}_P-${DASHBOARD_PORT:-4200}

    user: "0:0"
    working_dir: /workspaces/app

    volumes:
      - ../../:/workspaces/app:Z
      - ~/.cache/vscode-server-shared:/home/vscode/.vscode-server-shared:Z

    environment:
      - VSCODE_SERVER_DIR=/home/vscode/.vscode-server-shared

    ports:
      - "${DASHBOARD_PORT:-4200}:4200"   # http://localhost:4200

    command: >
      bash -c "
        node -v &&
        ng version || true &&
        sleep infinity
      "

  landing:
    image: ghcr.io/hallboard-team/node-v${NODE_VERSION:-22}_angular-v${ANGULAR_VERSION:-20}:latest
    container_name: ${CONTAINER_NAME_LANDING:-fe-landing}_N-v${NODE_VERSION:-22}_A-v${ANGULAR_VERSION:-20}_P-${LANDING_PORT:-4201}

    user: "0:0"
    working_dir: /workspaces/app

    volumes:
      - ../../:/workspaces/app:Z
      - ~/.cache/vscode-server-shared:/home/vscode/.vscode-server-shared:Z

    environment:
      - VSCODE_SERVER_DIR=/home/vscode/.vscode-server-shared

    ports:
      - "${LANDING_PORT:-4201}:4200"   # http://localhost:4201 â†’ container:4200

    command: >
      bash -c "
        node -v &&
        ng version || true &&
        sleep infinity
      "
